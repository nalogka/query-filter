# Конфигуратор QueryBuilder'а для фильтрации выборки из БД

В API часто встречается необходимость получить отфильтрованный список каких-либо результатов, например – получить всех пользователей с почтой example@nalogka.com. 

Данный пакет предназначен для того, чтобы конфигурировать QueryBuilder от Doctrine ORM, на основе строки фильтрации, которая приходит в запросе.

## Строка фильтрации

Строка фильтрации имеет собственный синтаксис. Может иметь следующий вид:

```
param.1=value1; param.2 >value2;

или 

param\<1=\;;param\=2=\=
```

Допускается использование следующих операторов:

`['=','!=', '>', '<', '>=', '<=']`


Если в строке фильтрации, к одному и тому же параметру, несколько раз применяется условие типа “равенство” `=`, то такое условие интерпретируется как совокупность условий, разделённых логическим оператором ИЛИ.

Например условие `filter=email=example@test.ru;email=vladimir@mail.com` будет интерпретировано как `email=example@test.ru ИЛИ email=vladimir@mail.com`.

Если в строке фильтрации, к одному и тому же параметру, несколько раз применяется условие вида “не равно” `!=`, то оно интерпретируются как совокупность условий разделённых логическим оператором И.

Те есть, условие `filter=email!=example@test.ru;email!=vladimir@mail.com` будет эквивалентно условию : `email!=example@test.ru` И `email!=vladimir@mail.com`

Фильтры, применённые к разным параметрам объединяются через логическое И, следовательно, запрос вида:

`filter=email=example@test.ru;created_at>2018-10-11 10:12:33` выборка будет отфильтрована и по адресу почтового ящика и по дате создания записи.









